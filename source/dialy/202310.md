# 202310

## prusa slicerでreplicator 2x rev0.1
```
; start gcode
M73 P0 ; enable build progress
G162 X Y F3000 ; home XY maximum
G161 Z F1200 ; home Z minimum
;G92 Z-5 ; set Z to -5
G1 Z0 ; move Z to 0
G161 Z F100 ; home Z slowly
M132 X Y Z A B ; recall home offsets
M135 T0; ADD BY HASHIMOTO
G1 X-130 Y-75 Z30 F9000 ; move to wait position off table
G130 X20 Y20 Z20 A20 B20 ; lower stepper Vrefs while heating
; M126 Sfan_speed_pwm
;M140 S{bed_temperature[0]} T0 ;
;M104 S{temperature[0]} T0
;M104 S{temperature[1]} T1
M133 T0 ; stabilize extruder temperature
G130 X127 Y127 Z40 A127 B127 ; default stepper Vrefs
G92 A0 B0; zero extruder

;G1 X-100 Y-70 F9000
;G1 Z0.3 F6000
;G1 X-90 Y-70 E24 F2000
;G1 X-100 Y-70 F180
;G1 X-110 Y-70 F5000
;G1 Z0.5 F100
; start comment out1
G1 Z0.3 ; position nozzle
;G1 E25 F300 ; purge nozzle
G1 X-120 Y-70 Z0.15 F1200 ; slow wipe
G1 X-115 Y-65 Z0.5 F1200 ; lift
; end comment out1
G92 A0 B0; zero extruder
M73 P1 ;@body (notify GPX body has started)
; end of start gcode

; **** Replicator 2 end.gcode ****
M73 P100 ; end build progress
G1 Z155 F1000 ; send Z axis to bottom of machine
M140 S0 T0 ; cool down HBP
M104 S0 T0 ; cool down right extruder
M104 S0 T1 ; cool down left extruder
M127 ; stop blower fan
G162 X Y F3000 ; home XY maximum
M18 ; disable stepper
M72 P1 ; play Ta-Da song
; **** end of end.gcode ****
```

## clang-format
- `find * | grep -E ".*(\.ino|\.cpp|\.c|\.h|\.hpp|\.hh)$" | xargs clang-format -i -style=LLVM`
- `find . | grep -E ".*(\.ino|\.cpp|\.c|\.h|\.hpp|\.hh)$" | xargs clang-format -i -style=LLVM`

## EMAX 2806-100KV
- リアクションホイールにつかえそうなBLDC．
- ジンバル用あたりを探すといいっぽい．KV値は100くらいの低めのやつを狙う．

## [GitHub - 771-8bit/SerialMonitorEssential](https://github.com/771-8bit/SerialMonitorEssential)

## [Webcam Motion Capture - Webカメラだけで指・手のトラッキング](https://webcammotioncapture.info/ja/#download)

## [GitHub - openstatusHQ/openstatus: 🏓  The open-source monitoring platform  🏓](https://github.com/openstatusHQ/openstatus)

## [GitHub - joaojacome/bitwarden-ssh-agent: Small python script to load bitwarden-store ssh keys into ssh-agent](https://github.com/joaojacome/bitwarden-ssh-agent)

## [タスクランナーとしてのmakeを使う際の工夫と注意点 - KAYAC engineers' blog](https://techblog.kayac.com/make-as-task-runner)

## [Lipo/Li-ion充放電制御回路の実験 - VIVITABLOG](https://blog.vivita.io/entry/2023/07/13/091546)

## [The Twelve-Factor App （日本語訳）](https://12factor.net/ja/)

## 手が動かないときの対処法
- taskを簡単な順にならべて簡単なほうからやる
- 簡単じゃないと思ったら分割して小さくする
- くりかえし

## [libvirt: The virtualization API](https://libvirt.org/)
- [libvirt: Network XML format](https://libvirt.org/formatnetwork.html)

## [Welcome - Klipper documentation](https://www.klipper3d.org/)

## [Hammerspoon](https://www.hammerspoon.org/)

## [Claude](https://claude.ai/)

## GKE upgrade
```
export GKE_CHANNEL=REGULAR
export GKE_VER=1.25.10-gke.2700
export GKE_REGION=asia-northeast1
export GKE_CLUSTER=my-dev-master
export GKE_NODEPOOL=my-dev-pool

gcloud container get-server-config --flatten="channels" --filter="channels.channel=${GKE_CHANNEL}" --format="yaml(channels.channel,channels.validVersions)" --region=${GKE_REGION}
gcloud container clusters list
gcloud container node-pools list --cluster=${GKE_CLUSTER} --region=${GKE_REGION}
kubectl get nodes
gcloud container clusters upgrade ${GKE_CLUSTER} --master --cluster-version ${GKE_VER} --region=${GKE_REGION}
gcloud container clusters upgrade ${GKE_CLUSTER} --node-pool=${GKE_NODEPOOL} --cluster-version ${GKE_VER} --region=${GKE_REGION}
```

## netbox v3.5.9 -> 3.6.xのマイグレーションでコケる
- 原因はindexがなかったから．
- [netbox/netbox/extras/migrations/0094_tag_object_types.py at v3.6.0 · netbox-community/netbox · GitHub](https://github.com/netbox-community/netbox/blob/v3.6.0/netbox/extras/migrations/0094_tag_object_types.py)
- `RenameIndex` of fields `('content_type', 'object_id')` をしたいのに，indexないのでErrorになっていた．
- Indexを貼って再度migrationをしたら通った．migration後のindex nameをみるとちゃんとrename後の `extras_tagg_content_717743_idx` となっているので想定通りっぽそう．
```
netbox-docker-netbox-1       | ⚙️ Applying database migrations
netbox-docker-netbox-1       | 🧬 loaded config '/etc/netbox/config/configuration.py'
netbox-docker-netbox-1       | 🧬 loaded config '/etc/netbox/config/extra.py'
netbox-docker-netbox-1       | 🧬 loaded config '/etc/netbox/config/logging.py'
netbox-docker-netbox-1       | 🧬 loaded config '/etc/netbox/config/plugins.py'
netbox-docker-netbox-1       | Operations to perform:
netbox-docker-netbox-1       |   Apply all migrations: account, admin, auth, circuits, contenttypes, core, dcim, django_rq, extras, ipam, sessions, social_django, taggit, tenancy, users, virtualization, wireless
netbox-docker-netbox-1       | Running migrations:
netbox-docker-netbox-1       |   Applying users.0004_netboxgroup_netboxuser... OK
netbox-docker-netbox-1       |   Applying account.0001_initial... OK
netbox-docker-netbox-1       |   Applying dcim.0173_remove_napalm_fields... OK
netbox-docker-netbox-1       |   Applying dcim.0174_device_latitude_device_longitude... OK
netbox-docker-netbox-1       |   Applying dcim.0174_rack_starting_unit... OK
netbox-docker-netbox-1       |   Applying dcim.0175_device_oob_ip... OK
netbox-docker-netbox-1       |   Applying dcim.0176_device_component_counters... OK
netbox-docker-netbox-1       |   Applying dcim.0177_devicetype_component_counters... OK
netbox-docker-netbox-1       |   Applying dcim.0178_virtual_chassis_member_counter... OK
netbox-docker-netbox-1       |   Applying dcim.0179_interfacetemplate_rf_role... OK
netbox-docker-netbox-1       |   Applying dcim.0180_powerfeed_tenant... OK
netbox-docker-netbox-1       |   Applying dcim.0181_rename_device_role_device_role... OK
netbox-docker-netbox-1       |   Applying extras.0093_configrevision_ordering... OK
netbox-docker-netbox-1       | Traceback (most recent call last):
netbox-docker-netbox-1       |   File "/opt/netbox/netbox/./manage.py", line 10, in <module>
netbox-docker-netbox-1       |     execute_from_command_line(sys.argv)
netbox-docker-netbox-1       |   File "/opt/netbox/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 442, in execute_from_command_line
netbox-docker-netbox-1       |     utility.execute()
netbox-docker-netbox-1       |   File "/opt/netbox/venv/lib/python3.11/site-packages/django/core/management/__init__.py", line 436, in execute
netbox-docker-netbox-1       |     self.fetch_command(subcommand).run_from_argv(self.argv)
netbox-docker-netbox-1       |   File "/opt/netbox/venv/lib/python3.11/site-packages/django/core/management/base.py", line 412, in run_from_argv
netbox-docker-netbox-1       |     self.execute(*args, **cmd_options)
netbox-docker-netbox-1       |   File "/opt/netbox/venv/lib/python3.11/site-packages/django/core/management/base.py", line 458, in execute
netbox-docker-netbox-1       |     output = self.handle(*args, **options)
netbox-docker-netbox-1       |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
netbox-docker-netbox-1       |   File "/opt/netbox/venv/lib/python3.11/site-packages/django/core/management/base.py", line 106, in wrapper
netbox-docker-netbox-1       |     res = handle_func(*args, **kwargs)
netbox-docker-netbox-1       |           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
netbox-docker-netbox-1       |   File "/opt/netbox/venv/lib/python3.11/site-packages/django/core/management/commands/migrate.py", line 356, in handle
netbox-docker-netbox-1       |     post_migrate_state = executor.migrate(
netbox-docker-netbox-1       |                          ^^^^^^^^^^^^^^^^^
netbox-docker-netbox-1       |   File "/opt/netbox/venv/lib/python3.11/site-packages/django/db/migrations/executor.py", line 135, in migrate
netbox-docker-netbox-1       |     state = self._migrate_all_forwards(
netbox-docker-netbox-1       |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
netbox-docker-netbox-1       |   File "/opt/netbox/venv/lib/python3.11/site-packages/django/db/migrations/executor.py", line 167, in _migrate_all_forwards
netbox-docker-netbox-1       |     state = self.apply_migration(
netbox-docker-netbox-1       |             ^^^^^^^^^^^^^^^^^^^^^
netbox-docker-netbox-1       |   File "/opt/netbox/venv/lib/python3.11/site-packages/django/db/migrations/executor.py", line 252, in apply_migration
netbox-docker-netbox-1       |     state = migration.apply(state, schema_editor)
netbox-docker-netbox-1       |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
netbox-docker-netbox-1       |   File "/opt/netbox/venv/lib/python3.11/site-packages/django/db/migrations/migration.py", line 132, in apply
netbox-docker-netbox-1       |     operation.database_forwards(
netbox-docker-netbox-1       |   File "/opt/netbox/venv/lib/python3.11/site-packages/django/db/migrations/operations/models.py", line 1042, in database_forwards
netbox-docker-netbox-1       |     raise ValueError(
netbox-docker-netbox-1       | ValueError: Found wrong number (0) of indexes for extras_taggeditem(content_type_id, object_id).


netbox=# \d extras_taggeditem
                                 Table "public.extras_taggeditem"
     Column      |  Type   | Collation | Nullable |                    Default
-----------------+---------+-----------+----------+-----------------------------------------------
 id              | bigint  |           | not null | nextval('extras_taggeditem_id_seq'::regclass)
 object_id       | integer |           | not null |
 content_type_id | integer |           | not null |
 tag_id          | bigint  |           | not null |
Indexes:
    "extras_taggeditem_pkey" PRIMARY KEY, btree (id)
Foreign-key constraints:
    "extras_taggeditem_tag_id_d48af7c7_fk" FOREIGN KEY (tag_id) REFERENCES extras_tag(id) DEFERRABLE INITIALLY DEFERRED

netbox=# create index on extras_taggeditem (content_type_id, object_id);
CREATE INDEX
netbox=# \d extras_taggeditem
                                 Table "public.extras_taggeditem"
     Column      |  Type   | Collation | Nullable |                    Default
-----------------+---------+-----------+----------+-----------------------------------------------
 id              | bigint  |           | not null | nextval('extras_taggeditem_id_seq'::regclass)
 object_id       | integer |           | not null |
 content_type_id | integer |           | not null |
 tag_id          | bigint  |           | not null |
Indexes:
    "extras_taggeditem_pkey" PRIMARY KEY, btree (id)
    "extras_taggeditem_content_type_id_object_id_idx" btree (content_type_id, object_id)
Foreign-key constraints:
    "extras_taggeditem_tag_id_d48af7c7_fk" FOREIGN KEY (tag_id) REFERENCES extras_tag(id) DEFERRABLE INITIALLY DEFERRED

netbox=#


netbox-docker-netbox-1       | ⚙️ Applying database migrations
netbox-docker-netbox-1       | 🧬 loaded config '/etc/netbox/config/configuration.py'
netbox-docker-netbox-1       | 🧬 loaded config '/etc/netbox/config/extra.py'
netbox-docker-netbox-1       | 🧬 loaded config '/etc/netbox/config/logging.py'
netbox-docker-netbox-1       | 🧬 loaded config '/etc/netbox/config/plugins.py'
netbox-docker-netbox-1       | Operations to perform:
netbox-docker-netbox-1       |   Apply all migrations: account, admin, auth, circuits, contenttypes, core, dcim, django_rq, extras, ipam, sessions, social_django, taggit, tenancy, users, virtualization, wireless
netbox-docker-netbox-1       | Running migrations:
netbox-docker-netbox-1       |   Applying users.0004_netboxgroup_netboxuser... OK
netbox-docker-netbox-1       |   Applying account.0001_initial... OK
netbox-docker-netbox-1       |   Applying dcim.0173_remove_napalm_fields... OK
netbox-docker-netbox-1       |   Applying dcim.0174_device_latitude_device_longitude... OK
netbox-docker-netbox-1       |   Applying dcim.0174_rack_starting_unit... OK
netbox-docker-netbox-1       |   Applying dcim.0175_device_oob_ip... OK
netbox-docker-netbox-1       |   Applying dcim.0176_device_component_counters... OK
netbox-docker-netbox-1       |   Applying dcim.0177_devicetype_component_counters... OK
netbox-docker-netbox-1       |   Applying dcim.0178_virtual_chassis_member_counter... OK
netbox-docker-netbox-1       |   Applying dcim.0179_interfacetemplate_rf_role... OK
netbox-docker-netbox-1       |   Applying dcim.0180_powerfeed_tenant... OK
netbox-docker-netbox-1       |   Applying dcim.0181_rename_device_role_device_role... OK
netbox-docker-netbox-1       |   Applying extras.0093_configrevision_ordering... OK
netbox-docker-netbox-1       |   Applying extras.0094_tag_object_types... OK
netbox-docker-netbox-1       |   Applying extras.0095_bookmarks... OK
netbox-docker-netbox-1       |   Applying extras.0096_customfieldchoiceset... OK
netbox-docker-netbox-1       |   Applying extras.0097_customfield_remove_choices... OK
netbox-docker-netbox-1       |   Applying extras.0098_webhook_custom_field_data_webhook_tags... OK
netbox-docker-netbox-1       |   Applying ipam.0067_ipaddress_index_host... OK
netbox-docker-netbox-1       |   Applying tenancy.0011_contactassignment_tags... OK
netbox-docker-netbox-1       |   Applying virtualization.0035_virtualmachine_interface_count... OK
netbox-docker-netbox-1       |   Applying virtualization.0036_virtualmachine_config_template... OK

netbox=# \d extras_taggeditem
                                 Table "public.extras_taggeditem"
     Column      |  Type   | Collation | Nullable |                    Default
-----------------+---------+-----------+----------+-----------------------------------------------
 id              | bigint  |           | not null | nextval('extras_taggeditem_id_seq'::regclass)
 object_id       | integer |           | not null |
 content_type_id | integer |           | not null |
 tag_id          | bigint  |           | not null |
Indexes:
    "extras_taggeditem_pkey" PRIMARY KEY, btree (id)
    "extras_tagg_content_717743_idx" btree (content_type_id, object_id)
Foreign-key constraints:
    "extras_taggeditem_tag_id_d48af7c7_fk" FOREIGN KEY (tag_id) REFERENCES extras_tag(id) DEFERRABLE INITIALLY DEFERRED

netbox=#
```